<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Singhulars Got Talent - GODSPEED</title>
    <script src="https://cdn.tailwindcss.com"></script>
   
    <!-- Google Identity Services -->
    <script src="https://accounts.google.com/gsi/client" async defer></script>
   
    <!-- EmailJS SDK -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
   
    <!-- Stripe.js -->
    <script src="https://js.stripe.com/v3/"></script>
   
    <!-- jsPDF for Receipt -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
   
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800;900&family=Space+Grotesk:wght@300;400;500;600;700&family=Sora:wght@300;400;500;600;700;800&family=DM+Serif+Display:ital@0;1&display=swap');
       
        /* Updated Color Variables - Using #f6cc68 as primary */
        :root {
            --white: #FFFFFF;
            --primary: #f6cc68;
            --primary-dark: #d4a84a;
            --primary-light: rgba(246, 204, 104, 0.15);
            --deep-black: #010000;
            --charcoal: #1a1a1a;
            --primary-glow: rgba(246, 204, 104, 0.4);
            --gradient-1: linear-gradient(135deg, #f6cc68 0%, #d4a84a 50%, #f6cc68 100%);
            --gradient-2: linear-gradient(180deg, #010000 0%, #f6cc68 100%);
            --gradient-3: linear-gradient(45deg, #f6cc68, #d4a84a);
        }
       
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            background: var(--deep-black);
            min-height: 100vh;
            font-family: 'Outfit', sans-serif;
            overflow-x: hidden;
            color: var(--white);
        }

        /* ==================== BACKGROUND EFFECTS ==================== */
        .bg-pattern {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            background:
                radial-gradient(ellipse at 0% 0%, rgba(246, 204, 104, 0.08) 0%, transparent 50%),
                radial-gradient(ellipse at 100% 100%, rgba(246, 204, 104, 0.05) 0%, transparent 50%),
                radial-gradient(ellipse at 50% 50%, rgba(246, 204, 104, 0.03) 0%, transparent 70%),
                var(--deep-black);
        }

        .grid-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background-image:
                linear-gradient(rgba(246, 204, 104, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(246, 204, 104, 0.03) 1px, transparent 1px);
            background-size: 60px 60px;
            pointer-events: none;
        }

        .floating-orb {
            position: fixed;
            border-radius: 50%;
            filter: blur(80px);
            opacity: 0.3;
            animation: floatOrb 20s ease-in-out infinite;
            pointer-events: none;
            z-index: -1;
        }

        .orb-1 {
            width: 400px;
            height: 400px;
            background: var(--primary);
            top: -100px;
            right: -100px;
            animation-delay: 0s;
        }

        .orb-2 {
            width: 300px;
            height: 300px;
            background: var(--primary-dark);
            bottom: -50px;
            left: -50px;
            animation-delay: -5s;
        }

        .orb-3 {
            width: 200px;
            height: 200px;
            background: var(--primary);
            top: 50%;
            left: 50%;
            animation-delay: -10s;
        }

        @keyframes floatOrb {
            0%, 100% { transform: translate(0, 0) scale(1); }
            25% { transform: translate(30px, -30px) scale(1.1); }
            50% { transform: translate(-20px, 20px) scale(0.9); }
            75% { transform: translate(20px, 30px) scale(1.05); }
        }

        /* ==================== TYPOGRAPHY ==================== */
        .font-display {
            font-family: 'DM Serif Display', serif;
        }

        .font-heading {
            font-family: 'Space Grotesk', sans-serif;
        }

        .font-body {
            font-family: 'Sora', sans-serif;
        }

        .text-gradient {
            background: var(--gradient-3);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .text-primary {
            color: var(--primary);
        }
                /* ==================== NAVIGATION ==================== */
        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 100;
            padding: 1rem 2rem;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .navbar.scrolled {
            background: rgba(1, 0, 0, 0.95);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(246, 204, 104, 0.2);
            padding: 0.75rem 2rem;
        }

        .nav-container {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo-group {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .logo-icon {
            width: 50px;
            height: 50px;
            background: var(--gradient-3);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'DM Serif Display', serif;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--deep-black);
            box-shadow: 0 4px 20px rgba(246, 204, 104, 0.3);
        }

        .logo-text {
            font-family: 'Space Grotesk', sans-serif;
            font-weight: 700;
            font-size: 1.5rem;
            letter-spacing: -0.5px;
        }

        .logo-subtitle {
            font-size: 0.65rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            opacity: 0.7;
            margin-top: -2px;
        }

        .nav-actions {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        /* ==================== BUTTONS ==================== */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            padding: 0.875rem 1.75rem;
            border-radius: 12px;
            font-weight: 600;
            font-size: 0.9rem;
            letter-spacing: 0.3px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            border: none;
            position: relative;
            overflow: hidden;
        }

        .btn-primary {
            background: var(--gradient-3);
            color: var(--deep-black);
            box-shadow: 0 4px 20px rgba(246, 204, 104, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(246, 204, 104, 0.4);
        }

        .btn-primary::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.5s;
        }

        .btn-primary:hover::before {
            left: 100%;
        }

        .btn-secondary {
            background: transparent;
            color: var(--white);
            border: 2px solid var(--primary);
        }

        .btn-secondary:hover {
            background: var(--primary-light);
            border-color: var(--primary);
        }

        .btn-ghost {
            background: rgba(246, 204, 104, 0.1);
            color: var(--primary);
            border: 1px solid rgba(246, 204, 104, 0.3);
        }

        .btn-ghost:hover {
            background: rgba(246, 204, 104, 0.2);
        }

        .btn-lg {
            padding: 1.25rem 2.5rem;
            font-size: 1.1rem;
            border-radius: 16px;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }

        /* ==================== HERO SECTION ==================== */
        .hero-section {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            padding: 120px 2rem 60px;
            position: relative;
        }

        .hero-container {
            max-width: 1400px;
            margin: 0 auto;
            width: 100%;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 4rem;
            align-items: center;
        }

        .hero-content {
            z-index: 10;
        }

        .hero-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: var(--primary-light);
            border: 1px solid rgba(246, 204, 104, 0.3);
            border-radius: 100px;
            font-size: 0.85rem;
            color: var(--primary);
            margin-bottom: 1.5rem;
        }

        .hero-badge-dot {
            width: 8px;
            height: 8px;
            background: var(--primary);
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .hero-title {
            font-family: 'DM Serif Display', serif;
            font-size: clamp(3rem, 6vw, 5rem);
            line-height: 1.1;
            margin-bottom: 1.5rem;
        }

        .hero-title-line {
            display: block;
        }

        .hero-title-accent {
            color: var(--primary);
            font-style: italic;
        }

        .hero-description {
            font-family: 'Sora', sans-serif;
            font-size: 1.15rem;
            line-height: 1.8;
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 2.5rem;
            max-width: 500px;
        }

        .hero-cta {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .hero-stats {
            display: flex;
            gap: 3rem;
            margin-top: 3rem;
            padding-top: 2rem;
            border-top: 1px solid rgba(246, 204, 104, 0.2);
        }

        .stat-item {
            text-align: left;
        }

        .stat-number {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary);
        }

        .stat-label {
            font-size: 0.85rem;
            color: rgba(255, 255, 255, 0.5);
            margin-top: 0.25rem;
        }

        /* Hero Visual */
        .hero-visual {
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .hero-card-stack {
            position: relative;
            width: 100%;
            max-width: 450px;
            aspect-ratio: 4/5;
        }

        .hero-card {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 24px;
            overflow: hidden;
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            border: 2px solid rgba(246, 204, 104, 0.2);
        }

        .hero-card:nth-child(1) {
            z-index: 3;
            transform: rotate(-3deg);
        }

        .hero-card:nth-child(2) {
            z-index: 2;
            transform: rotate(3deg) translateX(20px) translateY(-10px);
            opacity: 0.8;
        }

        .hero-card:nth-child(3) {
            z-index: 1;
            transform: rotate(-6deg) translateX(-20px) translateY(-20px);
            opacity: 0.6;
        }

        .hero-card img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .hero-card-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 2rem;
            background: linear-gradient(transparent, rgba(1, 0, 0, 0.9));
        }

        .hero-card-tag {
            display: inline-block;
            padding: 0.5rem 1rem;
            background: var(--primary);
            color: var(--deep-black);
            border-radius: 8px;
            font-size: 0.85rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .hero-card-title {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.25rem;
            font-weight: 600;
        }
                /* ==================== SPONSORS SECTION ==================== */
        .sponsors-section {
            padding: 60px 2rem;
            background: rgba(26, 26, 26, 0.5);
            border-top: 1px solid rgba(246, 204, 104, 0.1);
            border-bottom: 1px solid rgba(246, 204, 104, 0.1);
        }

        .sponsors-container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .sponsors-header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .sponsors-label {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 3px;
            color: var(--primary);
            margin-bottom: 0.5rem;
        }

        .sponsors-title {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.5rem;
            font-weight: 600;
        }

        .sponsors-grid {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 4rem;
            flex-wrap: wrap;
        }

        .sponsor-item {
            padding: 1.5rem 2.5rem;
            background: rgba(246, 204, 104, 0.05);
            border: 1px solid rgba(246, 204, 104, 0.15);
            border-radius: 16px;
            transition: all 0.3s;
            text-align: center;
        }

        .sponsor-item:hover {
            background: rgba(246, 204, 104, 0.1);
            transform: translateY(-3px);
            border-color: var(--primary);
        }

        .sponsor-name {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--white);
            margin-bottom: 0.25rem;
        }

        .sponsor-type {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--primary);
        }

        /* ==================== FEATURES SECTION ==================== */
        .features-section {
            padding: 100px 2rem;
        }

        .features-container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .section-header {
            text-align: center;
            margin-bottom: 4rem;
        }

        .section-label {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 3px;
            color: var(--primary);
            margin-bottom: 1rem;
            display: block;
        }

        .section-title {
            font-family: 'DM Serif Display', serif;
            font-size: clamp(2rem, 4vw, 3rem);
            margin-bottom: 1rem;
        }

        .section-description {
            font-family: 'Sora', sans-serif;
            font-size: 1.1rem;
            color: rgba(255, 255, 255, 0.6);
            max-width: 600px;
            margin: 0 auto;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
        }

        .feature-card {
            background: rgba(26, 26, 26, 0.6);
            border: 1px solid rgba(246, 204, 104, 0.15);
            border-radius: 20px;
            padding: 2rem;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .feature-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--gradient-3);
            opacity: 0;
            transition: opacity 0.3s;
        }

        .feature-card:hover {
            background: rgba(26, 26, 26, 0.8);
            border-color: rgba(246, 204, 104, 0.3);
            transform: translateY(-5px);
        }

        .feature-card:hover::before {
            opacity: 1;
        }

        .feature-icon {
            width: 60px;
            height: 60px;
            background: var(--primary-light);
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.75rem;
            margin-bottom: 1.5rem;
        }

        .feature-title {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 0.75rem;
            color: var(--primary);
        }

        .feature-description {
            font-size: 0.95rem;
            color: rgba(255, 255, 255, 0.6);
            line-height: 1.7;
        }

        /* ==================== GALLERY SECTION ==================== */
        .gallery-section {
            padding: 80px 2rem;
            background:
                radial-gradient(ellipse at 0% 0%, rgba(246, 204, 104, 0.08) 0%, transparent 50%),
                radial-gradient(ellipse at 100% 100%, rgba(246, 204, 104, 0.05) 0%, transparent 50%),
                var(--deep-black);
        }

        .gallery-container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1.5rem;
        }

        .gallery-item {
            position: relative;
            border-radius: 16px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.4s;
            border: 2px solid transparent;
        }

        .gallery-item:hover {
            border-color: var(--primary);
        }

        .gallery-item:nth-child(1) {
            grid-column: span 2;
            grid-row: span 2;
        }

        .gallery-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.6s;
        }

        .gallery-item:hover img {
            transform: scale(1.1);
        }

        .gallery-overlay {
            position: absolute;
            inset: 0;
            background: linear-gradient(transparent, rgba(1, 0, 0, 0.8));
            opacity: 0;
            transition: opacity 0.3s;
            display: flex;
            align-items: flex-end;
            padding: 1.5rem;
        }

        .gallery-item:hover .gallery-overlay {
            opacity: 1;
        }

        .gallery-label {
            font-weight: 600;
            font-size: 1rem;
            color: var(--primary);
        }

        /* ==================== APPLICATION FORM ==================== */
        .form-section {
            padding: 100px 2rem;
        }

        .form-container {
            max-width: 900px;
            margin: 0 auto;
        }

        .form-card {
            background: rgba(26, 26, 26, 0.8);
            border: 1px solid rgba(246, 204, 104, 0.2);
            border-radius: 24px;
            padding: 3rem;
            backdrop-filter: blur(20px);
        }

        .form-header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .form-title {
            font-family: 'DM Serif Display', serif;
            font-size: 2.5rem;
            margin-bottom: 0.75rem;
            color: var(--primary);
        }

        .form-subtitle {
            color: rgba(255, 255, 255, 0.6);
            font-size: 1rem;
        }

        .form-grid {
            display: grid;
            gap: 1.5rem;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
        }

        .form-group {
            position: relative;
        }

        .form-label {
            display: block;
            font-size: 0.9rem;
            font-weight: 500;
            color: var(--primary);
            margin-bottom: 0.5rem;
        }

        .form-input, .form-select {
            width: 100%;
            padding: 1rem 1.25rem;
            background: rgba(1, 0, 0, 0.6);
            border: 2px solid rgba(246, 204, 104, 0.2);
            border-radius: 12px;
            color: var(--white);
            font-family: 'Outfit', sans-serif;
            font-size: 1rem;
            transition: all 0.3s;
        }

        .form-input::placeholder {
            color: rgba(255, 255, 255, 0.4);
        }

        .form-input:focus, .form-select:focus {
            outline: none;
            border-color: var(--primary);
            background: rgba(1, 0, 0, 0.8);
            box-shadow: 0 0 0 4px rgba(246, 204, 104, 0.1);
        }

        .form-input[readonly] {
            opacity: 0.7;
            cursor: not-allowed;
        }

        textarea.form-input {
            min-height: 150px;
            resize: vertical;
        }

        .form-helper {
            font-size: 0.8rem;
            color: rgba(255, 255, 255, 0.5);
            margin-top: 0.5rem;
        }

        .char-counter {
            text-align: right;
            font-size: 0.8rem;
            color: var(--primary);
            margin-top: 0.5rem;
        }

        /* Phone Input with Country Code */
        .phone-input-group {
            display: flex;
            gap: 0.5rem;
        }

        .country-code-select {
            width: 130px;
            flex-shrink: 0;
        }

        .phone-number-input {
            flex: 1;
        }

        /* Talent Category Select */
        .talent-category-select {
            position: relative;
        }

        .talent-category-select select {
            appearance: none;
            cursor: pointer;
            padding-right: 2.5rem;
        }

        .talent-category-select::after {
            content: '‚ñº';
            position: absolute;
            right: 1rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--primary);
            pointer-events: none;
            font-size: 0.8rem;
        }

        /* Sub-category checkbox grid */
        .subcategory-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 0.75rem;
            margin-top: 1rem;
            padding: 1rem;
            background: rgba(1, 0, 0, 0.4);
            border-radius: 12px;
            border: 1px solid rgba(246, 204, 104, 0.1);
        }

        .subcategory-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.8);
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 8px;
            transition: all 0.2s;
        }

        .subcategory-item:hover {
            background: rgba(246, 204, 104, 0.1);
        }

        .subcategory-item input[type="checkbox"] {
            width: 18px;
            height: 18px;
            accent-color: var(--primary);
            cursor: pointer;
        }
                /* File Upload */
        .file-upload-area {
            border: 2px dashed rgba(246, 204, 104, 0.3);
            border-radius: 16px;
            padding: 2rem;
            text-align: center;
            transition: all 0.3s;
            cursor: pointer;
        }

        .file-upload-area:hover {
            border-color: var(--primary);
            background: rgba(246, 204, 104, 0.05);
        }

        .file-upload-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }

        .file-upload-text {
            font-size: 1rem;
            margin-bottom: 0.5rem;
            color: var(--primary);
        }

        .file-upload-hint {
            font-size: 0.85rem;
            color: rgba(255, 255, 255, 0.5);
        }

        .file-input {
            display: none;
        }

        .file-list {
            margin-top: 1rem;
        }

        .file-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0.75rem 1rem;
            background: rgba(246, 204, 104, 0.1);
            border-radius: 10px;
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
            border: 1px solid rgba(246, 204, 104, 0.2);
        }

        .file-item-name {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .file-item-size {
            color: var(--primary);
            font-size: 0.8rem;
        }

        .file-remove-btn {
            background: rgba(239, 68, 68, 0.2);
            border: none;
            color: #F87171;
            padding: 0.25rem 0.5rem;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.8rem;
        }

        .file-remove-btn:hover {
            background: rgba(239, 68, 68, 0.3);
        }

        /* Payment Section */
        .payment-card {
            background: linear-gradient(135deg, rgba(246, 204, 104, 0.15), rgba(246, 204, 104, 0.05));
            border: 1px solid rgba(246, 204, 104, 0.3);
            border-radius: 16px;
            padding: 1.5rem;
            margin-top: 1.5rem;
        }

        .payment-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .payment-title {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.25rem;
            font-weight: 600;
        }

        .payment-amount {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary);
        }

        .payment-currency {
            font-size: 1rem;
            opacity: 0.7;
        }

        .payment-features {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0.75rem;
        }

        .payment-feature {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.8);
        }

        .payment-check {
            color: var(--primary);
        }

        .form-actions {
            display: flex;
            gap: 1rem;
            margin-top: 2rem;
        }

        .form-actions .btn {
            flex: 1;
        }

        /* Age Display */
        .age-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: var(--primary-light);
            border: 1px solid rgba(246, 204, 104, 0.3);
            border-radius: 8px;
            margin-top: 0.5rem;
        }

        .age-value {
            font-weight: 600;
            color: var(--primary);
        }

        .category-badge {
            background: var(--gradient-3);
            color: var(--deep-black);
            padding: 0.25rem 0.75rem;
            border-radius: 6px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .age-warning {
            background: rgba(220, 38, 38, 0.1);
            border: 1px solid rgba(220, 38, 38, 0.3);
            color: #FCA5A5;
            padding: 1rem;
            border-radius: 12px;
            margin-top: 0.75rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        /* ==================== ADMIN DASHBOARD ==================== */
        .admin-section {
            min-height: 100vh;
        }

        .admin-header {
            background: rgba(26, 26, 26, 0.95);
            border-bottom: 1px solid rgba(246, 204, 104, 0.2);
            padding: 1rem 2rem;
            position: sticky;
            top: 0;
            z-index: 100;
            backdrop-filter: blur(20px);
        }

        .admin-nav {
            max-width: 1600px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .admin-content {
            max-width: 1600px;
            margin: 0 auto;
            padding: 2rem;
        }

        .admin-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: rgba(26, 26, 26, 0.8);
            border: 1px solid rgba(246, 204, 104, 0.2);
            border-radius: 16px;
            padding: 1.5rem;
            transition: all 0.3s;
        }

        .stat-card:hover {
            border-color: rgba(246, 204, 104, 0.4);
            transform: translateY(-2px);
        }

        .stat-card-label {
            font-size: 0.85rem;
            color: rgba(255, 255, 255, 0.6);
            margin-bottom: 0.5rem;
        }

        .stat-card-value {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary);
        }

        /* Data Table */
        .data-table-container {
            background: rgba(26, 26, 26, 0.8);
            border: 1px solid rgba(246, 204, 104, 0.2);
            border-radius: 20px;
            overflow: hidden;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
        }

        .data-table th {
            background: rgba(246, 204, 104, 0.1);
            padding: 1rem;
            text-align: left;
            font-family: 'Space Grotesk', sans-serif;
            font-weight: 600;
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--primary);
            border-bottom: 1px solid rgba(246, 204, 104, 0.2);
        }

        .data-table td {
            padding: 1rem;
            border-bottom: 1px solid rgba(246, 204, 104, 0.1);
            font-size: 0.9rem;
        }

        .data-table tr:hover {
            background: rgba(246, 204, 104, 0.05);
        }

        .user-cell {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            object-fit: cover;
            border: 2px solid rgba(246, 204, 104, 0.3);
        }

        .user-avatar-placeholder {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            background: var(--gradient-3);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1rem;
            color: var(--deep-black);
        }

        .user-info-name {
            font-weight: 600;
        }

        .user-info-email {
            font-size: 0.8rem;
            color: rgba(255, 255, 255, 0.5);
        }

        .status-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
            padding: 0.35rem 0.75rem;
            border-radius: 6px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .status-pending {
            background: rgba(246, 204, 104, 0.2);
            color: var(--primary);
        }

        .status-approved {
            background: rgba(34, 197, 94, 0.2);
            color: #4ADE80;
        }

        .status-rejected {
            background: rgba(239, 68, 68, 0.2);
            color: #F87171;
        }

        .action-btns {
            display: flex;
            gap: 0.5rem;
        }

        .action-btn {
            padding: 0.5rem 0.75rem;
            border-radius: 8px;
            font-size: 0.8rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            border: none;
        }

        .action-btn-approve {
            background: rgba(34, 197, 94, 0.2);
            color: #4ADE80;
        }

        .action-btn-reject {
            background: rgba(239, 68, 68, 0.2);
            color: #F87171;
        }

        .action-btn-view {
            background: rgba(59, 130, 246, 0.2);
            color: #60A5FA;
        }

        /* ==================== MODALS ==================== */
        .modal-overlay {
            position: fixed;
            inset: 0;
            background: rgba(1, 0, 0, 0.9);
            backdrop-filter: blur(10px);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: 2rem;
        }

        .modal-overlay.active {
            display: flex;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background: var(--charcoal);
            border: 1px solid rgba(246, 204, 104, 0.3);
            border-radius: 24px;
            width: 100%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
            animation: slideUp 0.3s ease;
        }

        @keyframes slideUp {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .modal-header {
            padding: 1.5rem 2rem;
            border-bottom: 1px solid rgba(246, 204, 104, 0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-title {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--primary);
        }

        .modal-close {
            width: 36px;
            height: 36px;
            border-radius: 10px;
            background: rgba(246, 204, 104, 0.1);
            border: none;
            color: var(--white);
            font-size: 1.25rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .modal-close:hover {
            background: rgba(239, 68, 68, 0.2);
            color: #F87171;
        }

        .modal-body {
            padding: 2rem;
        }

        .modal-footer {
            padding: 1.5rem 2rem;
            border-top: 1px solid rgba(246, 204, 104, 0.2);
            display: flex;
            gap: 1rem;
        }

        /* Success Modal */
        .success-icon {
            width: 80px;
            height: 80px;
            background: rgba(34, 197, 94, 0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1.5rem;
            font-size: 2.5rem;
        }

        .success-title {
            font-family: 'DM Serif Display', serif;
            font-size: 2rem;
            margin-bottom: 1rem;
            color: #4ADE80;
            text-align: center;
        }

        .success-message {
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 1.5rem;
            line-height: 1.6;
            text-align: center;
        }

        .success-details {
            background: rgba(1, 0, 0, 0.5);
            border-radius: 12px;
            padding: 1rem;
            margin-bottom: 1.5rem;
        }

        .success-detail-row {
            display: flex;
            justify-content: space-between;
            padding: 0.5rem 0;
            border-bottom: 1px solid rgba(246, 204, 104, 0.1);
        }

        .success-detail-row:last-child {
            border-bottom: none;
        }

        .success-detail-label {
            color: rgba(255, 255, 255, 0.5);
            font-size: 0.9rem;
        }

        .success-detail-value {
            font-weight: 600;
            color: var(--primary);
            font-size: 0.9rem;
        }

        /* File Viewer Modal */
        .file-viewer-container {
            background: rgba(1, 0, 0, 0.5);
            border-radius: 16px;
            min-height: 400px;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        .file-viewer-container img,
        .file-viewer-container video {
            max-width: 100%;
            max-height: 500px;
            border-radius: 12px;
        }

        /* User Profile Button */
        .user-profile-btn {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.5rem 1rem;
            background: rgba(246, 204, 104, 0.1);
            border: 1px solid rgba(246, 204, 104, 0.3);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .user-profile-btn:hover {
            background: rgba(246, 204, 104, 0.2);
        }

        .user-profile-avatar {
            width: 36px;
            height: 36px;
            border-radius: 10px;
            object-fit: cover;
        }

        .user-profile-name {
            font-weight: 600;
            font-size: 0.9rem;
        }

        /* ==================== FOOTER ==================== */
        .footer {
            background: rgba(1, 0, 0, 0.95);
            border-top: 1px solid rgba(246, 204, 104, 0.2);
            padding: 60px 2rem 30px;
        }

        .footer-container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .footer-grid {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr 1fr;
            gap: 3rem;
            margin-bottom: 3rem;
        }

        .footer-brand {
            max-width: 300px;
        }

        .footer-logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 1rem;
        }

        .footer-logo-icon {
            width: 40px;
            height: 40px;
            background: var(--gradient-3);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'DM Serif Display', serif;
            font-size: 1.25rem;
            color: var(--deep-black);
        }

        .footer-logo-text {
            font-family: 'Space Grotesk', sans-serif;
            font-weight: 700;
            font-size: 1.25rem;
        }

        .footer-description {
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.9rem;
            line-height: 1.7;
        }

        .footer-heading {
            font-family: 'Space Grotesk', sans-serif;
            font-weight: 600;
            font-size: 1rem;
            margin-bottom: 1.25rem;
            color: var(--primary);
        }

        .footer-links {
            list-style: none;
        }

        .footer-link {
            margin-bottom: 0.75rem;
        }

        .footer-link a {
            color: rgba(255, 255, 255, 0.6);
            text-decoration: none;
            font-size: 0.9rem;
            transition: color 0.2s;
        }

        .footer-link a:hover {
            color: var(--primary);
        }

        .footer-bottom {
            padding-top: 2rem;
            border-top: 1px solid rgba(246, 204, 104, 0.15);
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.85rem;
            color: rgba(255, 255, 255, 0.5);
        }

        /* ==================== RESPONSIVE ==================== */
        @media (max-width: 1024px) {
            .hero-container {
                grid-template-columns: 1fr;
                text-align: center;
            }

            .hero-description {
                margin: 0 auto 2.5rem;
            }

            .hero-cta {
                justify-content: center;
            }

            .hero-stats {
                justify-content: center;
            }

            .hero-visual {
                display: none;
            }

            .gallery-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .footer-grid {
                grid-template-columns: 1fr 1fr;
            }
        }

        @media (max-width: 768px) {
            .navbar {
                padding: 1rem;
            }

            .form-row {
                grid-template-columns: 1fr;
            }

            .phone-input-group {
                flex-direction: column;
            }

            .country-code-select {
                width: 100%;
            }

            .form-card {
                padding: 1.5rem;
            }

            .gallery-grid {
                grid-template-columns: 1fr;
            }

            .gallery-item:nth-child(1) {
                grid-column: span 1;
                grid-row: span 1;
            }

            .footer-grid {
                grid-template-columns: 1fr;
            }

            .footer-bottom {
                flex-direction: column;
                gap: 1rem;
                text-align: center;
            }

            .admin-stats {
                grid-template-columns: 1fr 1fr;
            }

            .data-table-container {
                overflow-x: auto;
            }

            .data-table {
                min-width: 1200px;
            }

            .subcategory-grid {
                grid-template-columns: 1fr;
            }
        }

        /* ==================== SCROLLBAR ==================== */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--deep-black);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--primary-dark);
        }

        /* ==================== UTILITIES ==================== */
        .hidden {
            display: none !important;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
        }
    </style>
</head>
<body>
    <!-- Background Effects -->
    <div class="bg-pattern"></div>
    <div class="grid-overlay"></div>
    <div class="floating-orb orb-1"></div>
    <div class="floating-orb orb-2"></div>
    <div class="floating-orb orb-3"></div>

    <!-- ==================== PUBLIC PAGE ==================== -->
    <div id="publicPage">
        <!-- Navigation -->
        <nav class="navbar" id="navbar">
            <div class="nav-container">
                <div class="logo-group">
                    <div class="logo-icon">G</div>
                    <div>
                        <div class="logo-text">GODSPEED</div>
                        <div class="logo-subtitle">Singhulars Got Talent</div>
                    </div>
                </div>
                <div class="nav-actions" id="navActions">
                    <button onclick="handleAuthButton()" class="btn btn-secondary" id="authBtn">
                        Sign In
                    </button>
                    <button onclick="showAdminLogin()" class="btn btn-ghost">
                        Admin
                    </button>
                </div>
            </div>
        </nav>

        <!-- Hero Section -->
        <section class="hero-section">
            <div class="hero-container">
                <div class="hero-content">
                    <div class="hero-badge">
                        <span class="hero-badge-dot"></span>
                        <span>üá¶üá™ UAE's Got Talent - Applications Open</span>
                    </div>
                    <h1 class="hero-title">
                        <span class="hero-title-line">Discover Your</span>
                        <span class="hero-title-line hero-title-accent">Spotlight</span>
                        <span class="hero-title-line">Moment</span>
                    </h1>
                    <p class="hero-description">
                        Join the most prestigious talent competition in the UAE.
                        Whether you sing, dance, perform, or create - this is your stage to shine.
                        All nationalities welcome!
                    </p>
                    <div class="hero-cta">
                        <button onclick="handleApplyNow()" class="btn btn-primary btn-lg">
                            üéØ Apply Now
                        </button>
                        <button class="btn btn-secondary btn-lg">
                            Learn More
                        </button>
                    </div>
                    <div class="hero-stats">
                        <div class="stat-item">
                            <div class="stat-number">500+</div>
                            <div class="stat-label">Participants</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number">50K</div>
                            <div class="stat-label">Prize Pool (AED)</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number">8</div>
                            <div class="stat-label">Categories</div>
                        </div>
                    </div>
                </div>
                <div class="hero-visual">
                    <div class="hero-card-stack">
                        <div class="hero-card">
                            <img src="https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=500&h=600&fit=crop" alt="Performance">
                            <div class="hero-card-overlay">
                                <span class="hero-card-tag">üé§ Performing Arts</span>
                                <div class="hero-card-title">Show Your Talent</div>
                            </div>
                        </div>
                        <div class="hero-card">
                            <img src="https://images.unsplash.com/photo-1508700115892-45ecd05ae2ad?w=500&h=600&fit=crop" alt="Dance">
                        </div>
                        <div class="hero-card">
                            <img src="https://images.unsplash.com/photo-1514320291840-2e0a9bf2a9ae?w=500&h=600&fit=crop" alt="Music">
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Sponsors Section -->
        <section class="sponsors-section">
            <div class="sponsors-container">
                <div class="sponsors-header">
                    <div class="sponsors-label">Proudly Supported By</div>
                    <h2 class="sponsors-title">Our Sponsors</h2>
                </div>
                <div class="sponsors-grid">
                    <div class="sponsor-item">
                        <div class="sponsor-name">PLATINUM</div>
                        <div class="sponsor-type">Title Sponsor</div>
                    </div>
                    <div class="sponsor-item">
                        <div class="sponsor-name">GOLD</div>
                        <div class="sponsor-type">Co-Sponsor</div>
                    </div>
                    <div class="sponsor-item">
                        <div class="sponsor-name">SILVER</div>
                        <div class="sponsor-type">Associate</div>
                    </div>
                    <div class="sponsor-item">
                        <div class="sponsor-name">BRONZE</div>
                        <div class="sponsor-type">Partner</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Features Section -->
        <section class="features-section">
            <div class="features-container">
                <div class="section-header">
                    <span class="section-label">Why Join Us</span>
                    <h2 class="section-title">Experience Excellence</h2>
                    <p class="section-description">
                        More than just a competition - it's a journey towards stardom
                    </p>
                </div>
                <div class="features-grid">
                    <div class="feature-card">
                        <div class="feature-icon">üèÜ</div>
                        <h3 class="feature-title">National Recognition</h3>
                        <p class="feature-description">
                            Compete at the highest level and gain recognition across the UAE with our prestigious platform.
                        </p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">üí∞</div>
                        <h3 class="feature-title">Amazing Prizes</h3>
                        <p class="feature-description">
                            Win substantial cash prizes and exclusive opportunities to kickstart your career.
                        </p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">üë®‚Äç‚öñÔ∏è</div>
                        <h3 class="feature-title">Expert Judges</h3>
                        <p class="feature-description">
                            Get evaluated by industry professionals who can provide valuable feedback and connections.
                        </p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">üöÄ</div>
                        <h3 class="feature-title">Career Launch</h3>
                        <p class="feature-description">
                            Use our platform as a springboard to launch your professional career in entertainment.
                        </p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">üì∫</div>
                        <h3 class="feature-title">Media Exposure</h3>
                        <p class="feature-description">
                            Get featured on major media platforms and social channels reaching millions.
                        </p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">üåç</div>
                        <h3 class="feature-title">All Nationalities</h3>
                        <p class="feature-description">
                            Open to all cultures and nationalities residing in UAE. Celebrate diversity through talent!
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Gallery Section -->
        <section class="gallery-section">
            <div class="gallery-container">
                <div class="section-header">
                    <span class="section-label">Past Events</span>
                    <h2 class="section-title">Moments of Glory</h2>
                </div>
                <div class="gallery-grid">
                    <div class="gallery-item">
                        <img src="https://images.unsplash.com/photo-1501281668745-f7f57925c3b4?w=800&h=800&fit=crop" alt="Event 1">
                        <div class="gallery-overlay">
                            <span class="gallery-label">Grand Finale 2023</span>
                        </div>
                    </div>
                    <div class="gallery-item">
                        <img src="https://images.unsplash.com/photo-1470229722913-7c0e2dbbafd3?w=400&h=400&fit=crop" alt="Event 2">
                        <div class="gallery-overlay">
                            <span class="gallery-label">Live Performance</span>
                        </div>
                    </div>
                    <div class="gallery-item">
                        <img src="https://images.unsplash.com/photo-1478147427282-58a87a120781?w=400&h=400&fit=crop" alt="Event 3">
                        <div class="gallery-overlay">
                            <span class="gallery-label">Dance Round</span>
                        </div>
                    </div>
                    <div class="gallery-item">
                        <img src="https://images.unsplash.com/photo-1514320291840-2e0a9bf2a9ae?w=400&h=400&fit=crop" alt="Event 4">
                        <div class="gallery-overlay">
                            <span class="gallery-label">Music Session</span>
                        </div>
                    </div>
                    <div class="gallery-item">
                        <img src="https://images.unsplash.com/photo-1429962714451-bb934ecdc4ec?w=400&h=400&fit=crop" alt="Event 5">
                        <div class="gallery-overlay">
                            <span class="gallery-label">Cultural Night</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>
                <!-- Application Form Section -->
        <section class="form-section hidden" id="applicationSection">
            <div class="form-container">
                <div class="form-card">
                    <div class="form-header">
                        <h2 class="form-title">üá¶üá™ Application Form</h2>
                        <p class="form-subtitle">Fill in your details to participate in UAE's Got Talent</p>
                    </div>
                    <form id="talentForm" class="form-grid">
                        <!-- Row 1: Name & Email -->
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">Full Name *</label>
                                <input type="text" id="fullName" required class="form-input" placeholder="Enter your full name">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Email Address *</label>
                                <input type="email" id="email" required readonly class="form-input" placeholder="Your email">
                            </div>
                        </div>
                       
                        <!-- Row 2: Mobile with Country Code & DOB -->
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">Mobile Number *</label>
                                <div class="phone-input-group">
                                    <select id="countryCode" class="form-select country-code-select" required>
                                        <option value="+971">üá¶üá™ +971 (UAE)</option>
                                        <option value="+91">üáÆüá≥ +91 (India)</option>
                                    </select>
                                    <input type="tel" id="mobile" required pattern="[0-9]{7,10}" class="form-input phone-number-input" placeholder="Mobile number">
                                </div>
                                <p class="form-helper">Enter number without country code</p>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Date of Birth *</label>
                                <input type="date" id="dateOfBirth" required onchange="calculateAge()" class="form-input">
                                <div id="ageDisplay"></div>
                            </div>
                        </div>

                        <!-- Talent Category Selection -->
                        <div class="form-group">
                            <label class="form-label">Select Talent Category *</label>
                            <div class="talent-category-select">
                                <select id="talentCategory" required class="form-select" onchange="showSubcategories()">
                                    <option value="">-- Select a Category --</option>
                                    <option value="performing_arts">üé§ Performing Arts</option>
                                    <option value="cultural_traditional">üåç Cultural & Traditional Arts</option>
                                    <option value="novelty_acts">üé© Novelty Acts</option>
                                    <option value="circus_physical">üé™ Circus, Physical & Fitness Skills</option>
                                    <option value="visual_creative">üé® Visual & Creative Arts</option>
                                    <option value="comedy_voice">üòÇ Comedy, Story & Voice Arts</option>
                                    <option value="special_unique">‚≠ê Special & Unique Skills</option>
                                    <option value="group_community">üë• Group & Community Talent</option>
                                </select>
                            </div>
                        </div>

                        <!-- Subcategories Container -->
                        <div class="form-group" id="subcategoriesContainer" style="display: none;">
                            <label class="form-label">Select Specific Talent(s) *</label>
                            <div class="subcategory-grid" id="subcategoryGrid">
                                <!-- Subcategories will be populated dynamically -->
                            </div>
                        </div>

                        <!-- Talent Description -->
                        <div class="form-group">
                            <label class="form-label">Tell us about your talent (Max 1000 words) *</label>
                            <textarea id="talentDescription" required maxlength="7000" class="form-input" placeholder="Describe your talent in detail... What makes you unique? What's your experience? What will you perform?"></textarea>
                            <div class="char-counter">
                                <span id="charCount">0</span> / 7000 characters
                            </div>
                        </div>

                        <!-- Performance Link (Optional) -->
                        <div class="form-group">
                            <label class="form-label">Performance Video Link (Optional)</label>
                            <input type="url" id="performanceLink" class="form-input" placeholder="YouTube, Instagram, or any video link">
                            <p class="form-helper">Share a link to your previous performance if available</p>
                        </div>

                        <!-- File Upload -->
                        <div class="form-group">
                            <label class="form-label">Upload Performance Files (Max 50MB each) *</label>
                            <div class="file-upload-area" onclick="document.getElementById('fileUpload').click()">
                                <div class="file-upload-icon">üìÅ</div>
                                <div class="file-upload-text">Click to upload or drag and drop</div>
                                <div class="file-upload-hint">MP4, Images, PDF, MP3 ‚Ä¢ Max 50MB per file ‚Ä¢ Max 5 files</div>
                            </div>
                            <input type="file" id="fileUpload" required accept=".mp4,.mov,.avi,image/*,.pdf,.mp3,.wav" multiple class="file-input">
                            <div id="filesList" class="file-list"></div>
                            <p id="fileSize" class="form-helper"></p>
                        </div>

                        <!-- Payment Section -->
                        <div class="payment-card">
                            <div class="payment-header">
                                <div class="payment-title">üí≥ Registration Fee</div>
                                <div class="payment-amount">
                                    <span class="payment-currency">AED</span> 55
                                </div>
                            </div>
                            <div class="payment-features">
                                <div class="payment-feature">
                                    <span class="payment-check">‚úì</span> Application processing
                                </div>
                                <div class="payment-feature">
                                    <span class="payment-check">‚úì</span> Secure payment
                                </div>
                                <div class="payment-feature">
                                    <span class="payment-check">‚úì</span> Powered by Stripe
                                </div>
                                <div class="payment-feature">
                                    <span class="payment-check">‚úì</span> Instant confirmation
                                </div>
                            </div>
                        </div>

                        <!-- Form Actions -->
                        <div class="form-actions">
                            <button type="submit" id="submitBtn" class="btn btn-primary btn-lg">
                                üí≥ Pay AED 55 & Submit
                            </button>
                            <button type="button" onclick="hideApplicationForm()" class="btn btn-secondary btn-lg">
                                Cancel
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="footer">
            <div class="footer-container">
                <div class="footer-grid">
                    <div class="footer-brand">
                        <div class="footer-logo">
                            <div class="footer-logo-icon">G</div>
                            <div class="footer-logo-text">GODSPEED</div>
                        </div>
                        <p class="footer-description">
                            UAE's Got Talent celebrates every community, nationality, and creative expression.
                            All talents based in the UAE are welcome to participate.
                        </p>
                    </div>
                    <div>
                        <h4 class="footer-heading">Quick Links</h4>
                        <ul class="footer-links">
                            <li class="footer-link"><a href="#">Home</a></li>
                            <li class="footer-link"><a href="#">About</a></li>
                            <li class="footer-link"><a href="#">Apply Now</a></li>
                            <li class="footer-link"><a href="#">Contact</a></li>
                        </ul>
                    </div>
                    <div>
                        <h4 class="footer-heading">Categories</h4>
                        <ul class="footer-links">
                            <li class="footer-link"><a href="#">Junior (5-10)</a></li>
                            <li class="footer-link"><a href="#">Teenager (11-19)</a></li>
                            <li class="footer-link"><a href="#">Elder (20-35)</a></li>
                            <li class="footer-link"><a href="#">Senior (36+)</a></li>
                        </ul>
                    </div>
                    <div>
                        <h4 class="footer-heading">Contact</h4>
                        <ul class="footer-links">
                            <li class="footer-link"><a href="mailto:singhularsgottalent@gmail.com">Email Us</a></li>
                            <li class="footer-link"><a href="#">Support</a></li>
                            <li class="footer-link"><a href="#">FAQ</a></li>
                        </ul>
                    </div>
                </div>
                <div class="footer-bottom">
                    <div>¬© 2024 UAE's Got Talent - Singhulars. All rights reserved.</div>
                    <div>Powered by GODSPEED</div>
                </div>
            </div>
        </footer>
    </div>
        <!-- ==================== USER LOGIN PAGE ==================== -->
    <div id="userLoginPage" class="hidden" style="min-height: 100vh; display: flex; align-items: center; justify-content: center; padding: 2rem;">
        <div class="form-card" style="max-width: 450px; width: 100%;">
            <div class="form-header">
                <div class="logo-icon" style="margin: 0 auto 1rem; width: 60px; height: 60px; font-size: 1.75rem;">G</div>
                <h2 class="form-title">Welcome Back</h2>
                <p class="form-subtitle">Sign in to continue to UAE's Got Talent</p>
            </div>

            <div id="googleSignInButton" style="display: flex; justify-content: center; margin-bottom: 1.5rem;"></div>

            <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1.5rem;">
                <div style="flex: 1; height: 1px; background: rgba(246, 204, 104, 0.3);"></div>
                <span style="font-size: 0.85rem; color: rgba(255,255,255,0.5);">OR</span>
                <div style="flex: 1; height: 1px; background: rgba(246, 204, 104, 0.3);"></div>
            </div>

            <div id="loginForm" class="form-grid">
                <div class="form-group">
                    <label class="form-label">Email Address</label>
                    <input type="email" id="loginEmail" class="form-input" placeholder="Enter your email">
                </div>
                <div class="form-group">
                    <label class="form-label">Password</label>
                    <input type="password" id="loginPassword" class="form-input" placeholder="Enter your password">
                </div>
                <button type="button" onclick="loginUser()" class="btn btn-primary" style="width: 100%;">Sign In</button>
                <p style="text-align: center; font-size: 0.9rem; margin-top: 1rem;">
                    Don't have an account?
                    <button onclick="toggleToRegister()" style="color: var(--primary); background: none; border: none; cursor: pointer; font-weight: 600;">Register</button>
                </p>
            </div>

            <div id="registerForm" class="hidden form-grid">
                <div class="form-group">
                    <label class="form-label">Full Name</label>
                    <input type="text" id="registerName" class="form-input" placeholder="Enter your full name">
                </div>
                <div class="form-group">
                    <label class="form-label">Email Address</label>
                    <input type="email" id="registerEmail" class="form-input" placeholder="Enter your email">
                </div>
                <div class="form-group">
                    <label class="form-label">Password</label>
                    <input type="password" id="registerPassword" class="form-input" placeholder="Create a password (min 6 chars)">
                </div>
                <div class="form-group">
                    <label class="form-label">Confirm Password</label>
                    <input type="password" id="registerConfirmPassword" class="form-input" placeholder="Confirm your password">
                </div>
                <button type="button" onclick="registerUser()" class="btn btn-primary" style="width: 100%;">Create Account</button>
                <p style="text-align: center; font-size: 0.9rem; margin-top: 1rem;">
                    Already have an account?
                    <button onclick="toggleToLogin()" style="color: var(--primary); background: none; border: none; cursor: pointer; font-weight: 600;">Sign In</button>
                </p>
            </div>

            <button onclick="backToPublicPage()" class="btn btn-ghost" style="width: 100%; margin-top: 1rem;">
                ‚Üê Back to Home
            </button>
        </div>
    </div>

    <!-- ==================== ADMIN DASHBOARD ==================== -->
    <div id="adminDashboard" class="hidden admin-section">
        <header class="admin-header">
            <div class="admin-nav">
                <div class="logo-group">
                    <div class="logo-icon">G</div>
                    <div>
                        <div class="logo-text">ADMIN PANEL</div>
                        <div class="logo-subtitle">UAE's Got Talent</div>
                    </div>
                </div>
                <div style="display: flex; gap: 1rem;">
                    <button onclick="refreshApplications()" class="btn btn-ghost">üîÑ Refresh</button>
                    <button onclick="exportToCSV()" class="btn btn-ghost">üì• Export CSV</button>
                    <button onclick="logout()" class="btn" style="background: rgba(239, 68, 68, 0.2); color: #F87171;">
                        Logout
                    </button>
                </div>
            </div>
        </header>

        <div class="admin-content">
            <div class="admin-stats">
                <div class="stat-card">
                    <div class="stat-card-label">Total Applications</div>
                    <div class="stat-card-value" id="totalApps">0</div>
                </div>
                <div class="stat-card">
                    <div class="stat-card-label">Total Revenue</div>
                    <div class="stat-card-value">AED <span id="totalRevenue">0</span></div>
                </div>
                <div class="stat-card">
                    <div class="stat-card-label">Junior (5-10)</div>
                    <div class="stat-card-value" id="juniorCount">0</div>
                </div>
                <div class="stat-card">
                    <div class="stat-card-label">Teenager (11-19)</div>
                    <div class="stat-card-value" id="teenagerCount">0</div>
                </div>
                <div class="stat-card">
                    <div class="stat-card-label">Elder (20-35)</div>
                    <div class="stat-card-value" id="elderCount">0</div>
                </div>
                <div class="stat-card">
                    <div class="stat-card-label">Senior (36+)</div>
                    <div class="stat-card-value" id="seniorCount">0</div>
                </div>
            </div>

            <div class="data-table-container">
                <table class="data-table" id="applicationsTable">
                    <thead>
                        <tr>
                            <th>Participant</th>
                            <th>Mobile</th>
                            <th>Age</th>
                            <th>Category</th>
                            <th>Talent Type</th>
                            <th>DOB</th>
                            <th>Files</th>
                            <th>Payment</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="applicationsBody">
                        <tr>
                            <td colspan="10" style="text-align: center; padding: 3rem;">
                                Loading applications...
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- ==================== MODALS ==================== -->
   
    <!-- Admin Login Modal -->
    <div id="adminPasswordModal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">üîí Admin Login</h3>
                <button class="modal-close" onclick="closeAdminLogin()">√ó</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Admin Password</label>
                    <input type="password" id="adminPassword" class="form-input" placeholder="Enter admin password" onkeypress="if(event.key==='Enter')verifyAdminPassword()">
                    <p class="form-helper">Default: admin123</p>
                </div>
            </div>
            <div class="modal-footer">
                <button onclick="verifyAdminPassword()" class="btn btn-primary" style="flex: 1;">Login</button>
                <button onclick="closeAdminLogin()" class="btn btn-secondary" style="flex: 1;">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Success Modal -->
    <div id="successModal" class="modal-overlay">
        <div class="modal-content" style="max-width: 450px;">
            <div class="modal-body" style="padding: 2.5rem;">
                <div class="success-icon">‚úì</div>
                <h3 class="success-title">Application Submitted!</h3>
                <p class="success-message">
                    Thank you for registering! You will be informed of further steps via email within 3-5 business days.
                </p>
                <div class="success-details">
                    <div class="success-detail-row">
                        <span class="success-detail-label">Payment ID</span>
                        <span class="success-detail-value" id="successPaymentId">‚Äî</span>
                    </div>
                    <div class="success-detail-row">
                        <span class="success-detail-label">Amount</span>
                        <span class="success-detail-value">AED 55</span>
                    </div>
                    <div class="success-detail-row">
                        <span class="success-detail-label">Email</span>
                        <span class="success-detail-value" id="successEmail">‚Äî</span>
                    </div>
                    <div class="success-detail-row">
                        <span class="success-detail-label">Category</span>
                        <span class="success-detail-value" id="successCategory">‚Äî</span>
                    </div>
                </div>
                <div style="display: flex; gap: 1rem;">
                    <button onclick="generateReceipt()" class="btn btn-primary" style="flex: 1;">üìÑ Download Receipt</button>
                    <button onclick="closeSuccessModal()" class="btn btn-secondary" style="flex: 1;">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- File Viewer Modal -->
    <div id="fileViewerModal" class="modal-overlay">
        <div class="modal-content" style="max-width: 900px;">
            <div class="modal-header">
                <h3 class="modal-title">üìÇ File Preview</h3>
                <button class="modal-close" onclick="closeFileViewer()">√ó</button>
            </div>
            <div class="modal-body">
                <div class="file-viewer-container" id="fileViewerContent">
                    <!-- File content will be loaded here -->
                </div>
            </div>
            <div class="modal-footer">
                <a id="downloadFileLink" href="#" download class="btn btn-primary" style="flex: 1;">‚¨áÔ∏è Download</a>
                <button onclick="closeFileViewer()" class="btn btn-secondary" style="flex: 1;">Close</button>
            </div>
        </div>
    </div>

    <!-- Application Details Modal -->
    <div id="applicationDetailsModal" class="modal-overlay">
        <div class="modal-content" style="max-width: 700px;">
            <div class="modal-header">
                <h3 class="modal-title">üìã Application Details</h3>
                <button class="modal-close" onclick="closeApplicationDetails()">√ó</button>
            </div>
            <div class="modal-body" id="applicationDetailsBody">
                <!-- Details will be populated -->
            </div>
            <div class="modal-footer">
                <button onclick="closeApplicationDetails()" class="btn btn-secondary" style="flex: 1;">Close</button>
            </div>
        </div>
    </div>
    <script> 
                     // ==================== CONFIGURATION ====================
        const GOOGLE_CLIENT_ID = '510466997628-85povrl38c2ccinvgb7op6993q3514s3.apps.googleusercontent.com';
        const EMAILJS_PUBLIC_KEY = 'YZpoRY4fYkni2gA6H';
        const EMAILJS_SERVICE_ID = 'service_gjyxfni';
        const TEMPLATE_APPROVED = 'template_79rj8l7';
        const TEMPLATE_REJECTED = 'template_5z2riwt';
        const STRIPE_PUBLISHABLE_KEY = 'pk_test_51QOz2oCvpkJKWzh6fvb6ZfJdKUjB9J6OEYY0HAbLQHqFcGo4KhNz2DeMvzEA6bqMXEFHlcjXO2NiGi2TFmBGjZd400Q2Oq7ZC8';
        const REGISTRATION_FEE_AED = 55;
        const CURRENCY = 'AED';
        const GOOGLE_SHEETS_URL = 'https://script.google.com/macros/s/YOUR_DEPLOYMENT_ID/exec';

        // Initialize EmailJS
        (function(){ emailjs.init(EMAILJS_PUBLIC_KEY); })();

        // Initialize Stripe
        const stripe = Stripe(STRIPE_PUBLISHABLE_KEY);

        // ==================== STATE MANAGEMENT ====================
        let currentUser = null;
        let currentRole = null;
        let pendingApplication = null;
        let currentViewingFile = null;

        const sessionData = {
            applications: [],
            users: []
        };

        // ==================== COUNTRY CODES ====================
        const countryCodes = [
            { code: '+971', country: 'UAE', flag: 'üá¶üá™' },
            { code: '+91', country: 'India', flag: 'üáÆüá≥' }
        ];

        // ==================== TALENT CATEGORIES ====================
        const talentCategories = {
            'Performing Arts': [
                'Singing (Solo / Duo / Group)',
                'Instrumental Music (Classical, Fusion, Contemporary)',
                'Bands (Rock, Indie, Pop, Arabic Fusion, Asian Fusion, African rhythms)',
                'Dance (Bollywood, Hip-Hop, Classical, Contemporary, Latin, Afro, Folk)',
                'Theatre / Acting / Skits',
                'Spoken Word Poetry / Rap / Shayari'
            ],
            'Cultural & Traditional Arts': [
                'Folk dances (Indian, Filipino, African, Pakistani, Arab, Chinese, Western)',
                'Traditional music from any culture',
                'Cultural storytelling',
                'Poetry forms (Nabati, Urdu, Punjabi, Tagalog, English)'
            ],
            'Novelty Acts': [
                'Magic & Illusion',
                'Mentalism',
                'Ventriloquism',
                'Mime Acts',
                'Shadow Performances',
                'Quick Change Acts'
            ],
            'Circus, Physical & Fitness Skills': [
                'Acrobatics / Aerials (Silks, Hoop, Pole)',
                'Parkour / Freerunning',
                'Gymnastic Acts',
                'Stunt Performers',
                'Fire / LED Performers',
                'Juggling / Balance acts'
            ],
            'Visual & Creative Arts': [
                'Live Art / Speed Painting',
                'Sand Art',
                'Body Painting',
                'Calligraphy (Arabic, English, Asian scripts)',
                'Digital Art Performances',
                'Graffiti / Street Art',
                '3D Chalk Art'
            ],
            'Comedy, Story & Voice Arts': [
                'Stand-Up Comedy (all languages)',
                'Impressionists / Mimicry Artists',
                'Storytelling',
                'Voice Acting / Dubbing Artists'
            ],
            'Special & Unique Skills': [
                'Guinness-style Challenges',
                'Speed Solving (Rubik\'s Cube, puzzles)',
                'Memory Championships',
                'Unique talents (Yo-yo, diabolo, skipping, martial arts demos)'
            ],
            'Group & Community Talent': [
                'School Groups',
                'Community Clubs',
                'Corporate Teams',
                'Family Acts',
                'Choirs & Ensembles'
            ]
        };

        // ==================== INITIALIZATION ====================
        window.onload = function() {
            // Initialize Google Sign-In
            google.accounts.id.initialize({
                client_id: GOOGLE_CLIENT_ID,
                callback: handleGoogleSignIn,
                auto_select: false,
                cancel_on_tap_outside: true
            });

            google.accounts.id.renderButton(
                document.getElementById("googleSignInButton"),
                {
                    theme: "filled_blue",
                    size: "large",
                    width: 350,
                    text: "continue_with",
                    shape: "rectangular"
                }
            );

            initEventListeners();
            populateCountryCodes();
            populateTalentCategories();
        };

        function initEventListeners() {
            // Navbar scroll effect
            window.addEventListener('scroll', () => {
                const navbar = document.getElementById('navbar');
                if (window.scrollY > 50) {
                    navbar.classList.add('scrolled');
                } else {
                    navbar.classList.remove('scrolled');
                }
            });

            // Character counter
            const textarea = document.getElementById('talentDescription');
            const charCount = document.getElementById('charCount');
            if (textarea) {
                textarea.addEventListener('input', function() {
                    charCount.textContent = this.value.length;
                });
            }

            // File input
            const fileInput = document.getElementById('fileUpload');
            if (fileInput) {
                fileInput.addEventListener('change', handleFileSelect);
            }

            // Form submission
            const form = document.getElementById('talentForm');
            if (form) {
                form.addEventListener('submit', handleFormSubmit);
            }

            // Talent category change
            const categorySelect = document.getElementById('talentCategory');
            if (categorySelect) {
                categorySelect.addEventListener('change', updateSubCategories);
            }

            // Enter key for admin password
            const adminPasswordInput = document.getElementById('adminPassword');
            if (adminPasswordInput) {
                adminPasswordInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        verifyAdminPassword();
                    }
                });
            }
        }

        // ==================== POPULATE DROPDOWNS ====================
        function populateCountryCodes() {
            const select = document.getElementById('countryCode');
            if (!select) return;

            select.innerHTML = '<option value="">Select</option>';
            countryCodes.forEach(cc => {
                const option = document.createElement('option');
                option.value = cc.code;
                option.textContent = `${cc.flag} ${cc.country} (${cc.code})`;
                select.appendChild(option);
            });
        }

        function populateTalentCategories() {
            const select = document.getElementById('talentCategory');
            if (!select) return;

            select.innerHTML = '<option value="">Select Category</option>';
            Object.keys(talentCategories).forEach(category => {
                const option = document.createElement('option');
                option.value = category;
                option.textContent = category;
                select.appendChild(option);
            });
        }

        function updateSubCategories() {
            const categorySelect = document.getElementById('talentCategory');
            const subCategorySelect = document.getElementById('talentSubCategory');
            
            if (!categorySelect || !subCategorySelect) return;

            const selectedCategory = categorySelect.value;
            subCategorySelect.innerHTML = '<option value="">Select Sub-Category</option>';

            if (selectedCategory && talentCategories[selectedCategory]) {
                talentCategories[selectedCategory].forEach(sub => {
                    const option = document.createElement('option');
                    option.value = sub;
                    option.textContent = sub;
                    subCategorySelect.appendChild(option);
                });
                subCategorySelect.disabled = false;
            } else {
                subCategorySelect.disabled = true;
            }
        }

        // ==================== AGE CALCULATION ====================
        function getAgeCategory(age) {
            if (age >= 5 && age <= 10) return 'Junior';
            if (age >= 11 && age <= 19) return 'Teenager';
            if (age >= 20 && age <= 35) return 'Elder';
            if (age >= 36) return 'Senior';
            return 'Invalid';
        }

        function calculateAge() {
            const dobInput = document.getElementById('dateOfBirth');
            const ageDisplay = document.getElementById('ageDisplay');
            const submitBtn = document.getElementById('submitBtn');
            
            if (!dobInput || !dobInput.value) {
                if (ageDisplay) ageDisplay.innerHTML = '';
                return null;
            }

            const dob = new Date(dobInput.value);
            const today = new Date();
            let age = today.getFullYear() - dob.getFullYear();
            const monthDiff = today.getMonth() - dob.getMonth();
            
            if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < dob.getDate())) {
                age--;
            }

            const category = getAgeCategory(age);

            if (age < 5) {
                ageDisplay.innerHTML = `
                    <div class="age-warning">
                        <span>‚ö†Ô∏è</span>
                        <span>Minimum age requirement is 5 years. You are not eligible to participate.</span>
                    </div>
                `;
                if (submitBtn) submitBtn.disabled = true;
                return null;
            } else {
                ageDisplay.innerHTML = `
                    <div class="age-badge">
                        <span class="age-value">${age} years</span>
                        <span class="category-badge">${category}</span>
                    </div>
                `;
                if (submitBtn) submitBtn.disabled = false;
            }

            return { age, category };
        }

        // ==================== FILE HANDLING ====================
        function handleFileSelect() {
            const files = this.files;
            const filesList = document.getElementById('filesList');
            const fileSize = document.getElementById('fileSize');
            
            if (!filesList || !fileSize) return;

            if (files.length > 0) {
                let totalSize = 0;
                let filesHtml = '';
                let hasOversizedFile = false;
                
                for (let i = 0; i < files.length; i++) {
                    const file = files[i];
                    const sizeMB = (file.size / (1024 * 1024)).toFixed(2);
                    totalSize += file.size;
                    
                    if (file.size > 50 * 1024 * 1024) {
                        hasOversizedFile = true;
                        filesHtml += `
                            <div class="file-item" style="border: 1px solid rgba(239, 68, 68, 0.5);">
                                <span class="file-item-name">‚ùå ${file.name}</span>
                                <span class="file-item-size" style="color: #F87171;">${sizeMB} MB (Too large!)</span>
                            </div>
                        `;
                    } else {
                        filesHtml += `
                            <div class="file-item">
                                <span class="file-item-name">‚úÖ ${file.name}</span>
                                <span class="file-item-size">${sizeMB} MB</span>
                            </div>
                        `;
                    }
                }
                
                filesList.innerHTML = filesHtml;
                
                const totalSizeMB = (totalSize / (1024 * 1024)).toFixed(2);
                fileSize.textContent = `Total: ${totalSizeMB} MB (${files.length} file${files.length > 1 ? 's' : ''})`;
                
                if (hasOversizedFile) {
                    alert('‚ö†Ô∏è Some files exceed the 50MB limit! Please remove them.');
                }
            } else {
                filesList.innerHTML = '';
                fileSize.textContent = '';
            }
        }

        // ==================== GOOGLE SHEETS FUNCTIONS ====================
        async function saveToGoogleSheets(data) {
            try {
                const response = await fetch(GOOGLE_SHEETS_URL, {
                    method: 'POST',
                    mode: 'no-cors',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ action: 'saveApplication', data: data })
                });
                console.log('‚úÖ Data saved to Google Sheets');
                return true;
            } catch (error) {
                console.error('‚ùå Error saving to Google Sheets:', error);
                // Still save locally
                return true;
            }
        }

        async function loadFromGoogleSheets() {
            try {
                const response = await fetch(`${GOOGLE_SHEETS_URL}?action=getApplications`);
                const data = await response.json();
                return data.applications || [];
            } catch (error) {
                console.error('‚ùå Error loading from Google Sheets:', error);
                return sessionData.applications;
            }
        }

        async function updateStatusInGoogleSheets(id, status) {
            try {
                await fetch(GOOGLE_SHEETS_URL, {
                    method: 'POST',
                    mode: 'no-cors',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ action: 'updateStatus', id: id, status: status })
                });
                console.log('‚úÖ Status updated in Google Sheets');
                return true;
            } catch (error) {
                console.error('‚ùå Error updating status:', error);
                return false;
            }
        }

        // ==================== GOOGLE SIGN-IN ====================
        function handleGoogleSignIn(response) {
            const credential = parseJwt(response.credential);
            
            if (!credential) {
                alert('‚ùå Failed to parse Google credentials');
                return;
            }

            let localUser = sessionData.users.find(u => u.email === credential.email);
            
            if (!localUser) {
                localUser = {
                    id: Date.now(),
                    googleId: credential.sub,
                    name: credential.name,
                    email: credential.email,
                    photoURL: credential.picture,
                    hasApplied: false,
                    authProvider: 'google',
                    createdAt: new Date().toISOString()
                };
                sessionData.users.push(localUser);
            }
            
            currentUser = localUser;
            currentRole = 'user';
            updateAuthButton();
            backToPublicPage();
            showNotification('success', `Welcome ${credential.name}!`);
        }

        function parseJwt(token) {
            try {
                const base64Url = token.split('.')[1];
                const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
                const jsonPayload = decodeURIComponent(atob(base64).split('').map(c =>
                    '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2)
                ).join(''));
                return JSON.parse(jsonPayload);
            } catch (e) {
                console.error('JWT parse error:', e);
                return null;
            }
        }

        // ==================== AUTH FUNCTIONS ====================
        function updateAuthButton() {
            const navActions = document.getElementById('navActions');
            if (!navActions) return;
            
            if (currentUser) {
                navActions.innerHTML = `
                    <div class="user-profile-btn">
                        ${currentUser.photoURL ?
                            `<img src="${currentUser.photoURL}" class="user-profile-avatar" alt="${currentUser.name}">` :
                            `<div class="user-profile-avatar" style="background: linear-gradient(45deg, #9C9677, #f6cc68); display: flex; align-items: center; justify-content: center; font-weight: 700; color: #010000;">
                                ${currentUser.name.charAt(0).toUpperCase()}
                            </div>`
                        }
                        <span class="user-profile-name">${currentUser.name.split(' ')[0]}</span>
                    </div>
                    <button onclick="logout()" class="btn btn-ghost">Logout</button>
                    <button onclick="showAdminLogin()" class="btn btn-ghost">Admin</button>
                `;
            } else {
                navActions.innerHTML = `
                    <button onclick="handleAuthButton()" class="btn btn-secondary" id="authBtn">Sign In</button>
                    <button onclick="showAdminLogin()" class="btn btn-ghost">Admin</button>
                `;
            }
        }

        function handleAuthButton() {
            if (currentUser) {
                logout();
            } else {
                showUserLoginPage();
            }
        }

        // ==================== NAVIGATION ====================
        function handleApplyNow() {
            if (!currentUser) {
                showNotification('warning', 'Please sign in to apply!');
                showUserLoginPage();
                return;
            }

            const existingApp = sessionData.applications.find(app => app.userEmail === currentUser.email);
            if (existingApp) {
                showNotification('warning', `You have already submitted an application!\nStatus: ${existingApp.status}`);
                return;
            }

            showApplicationForm();
        }

        function showUserLoginPage() {
            document.getElementById('publicPage').classList.add('hidden');
            document.getElementById('userLoginPage').classList.remove('hidden');
            document.getElementById('userLoginPage').style.display = 'flex';
        }

        function backToPublicPage() {
            document.getElementById('userLoginPage').classList.add('hidden');
            document.getElementById('userLoginPage').style.display = 'none';
            document.getElementById('publicPage').classList.remove('hidden');
        }

        function showApplicationForm() {
            document.getElementById('email').value = currentUser.email;
            document.getElementById('fullName').value = currentUser.name;
            document.getElementById('applicationSection').classList.remove('hidden');
            document.getElementById('applicationSection').scrollIntoView({ behavior: 'smooth' });
        }

        function hideApplicationForm() {
            document.getElementById('applicationSection').classList.add('hidden');
            document.getElementById('talentForm').reset();
            document.getElementById('charCount').textContent = '0';
            document.getElementById('fileSize').textContent = '';
            document.getElementById('ageDisplay').innerHTML = '';
            document.getElementById('filesList').innerHTML = '';
            
            // Reset subcategory
            const subCategorySelect = document.getElementById('talentSubCategory');
            if (subCategorySelect) {
                subCategorySelect.innerHTML = '<option value="">Select Sub-Category</option>';
                subCategorySelect.disabled = true;
            }
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // ==================== EMAIL/PASSWORD AUTH ====================
        function toggleToRegister() {
            document.getElementById('loginForm').classList.add('hidden');
            document.getElementById('registerForm').classList.remove('hidden');
        }

        function toggleToLogin() {
            document.getElementById('registerForm').classList.add('hidden');
            document.getElementById('loginForm').classList.remove('hidden');
        }

        function registerUser() {
            const name = document.getElementById('registerName').value.trim();
            const email = document.getElementById('registerEmail').value.trim();
            const password = document.getElementById('registerPassword').value;
            const confirmPassword = document.getElementById('registerConfirmPassword').value;

            if (!name || !email || !password || !confirmPassword) {
                showNotification('error', 'Please fill all fields!');
                return;
            }

            if (!validateEmail(email)) {
                showNotification('error', 'Please enter a valid email address!');
                return;
            }

            if (password.length < 6) {
                showNotification('error', 'Password must be at least 6 characters!');
                return;
            }

            if (password !== confirmPassword) {
                showNotification('error', 'Passwords do not match!');
                return;
            }

            const existingUser = sessionData.users.find(u => u.email === email);
            if (existingUser) {
                showNotification('error', 'User already exists with this email!');
                return;
            }

            const newUser = {
                id: Date.now(),
                name: name,
                email: email,
                password: password,
                hasApplied: false,
                authProvider: 'email',
                createdAt: new Date().toISOString()
            };

            sessionData.users.push(newUser);
            showNotification('success', 'Registration successful! Please login.');
            
            // Clear form
            document.getElementById('registerName').value = '';
            document.getElementById('registerEmail').value = '';
            document.getElementById('registerPassword').value = '';
            document.getElementById('registerConfirmPassword').value = '';
            
            toggleToLogin();
        }

        function loginUser() {
            const email = document.getElementById('loginEmail').value.trim();
            const password = document.getElementById('loginPassword').value;

            if (!email || !password) {
                showNotification('error', 'Please enter email and password!');
                return;
            }

            const user = sessionData.users.find(u => u.email === email && u.password === password);
            if (!user) {
                showNotification('error', 'Invalid email or password!');
                return;
            }

            currentUser = user;
            currentRole = 'user';
            updateAuthButton();
            backToPublicPage();
            showNotification('success', `Welcome ${user.name}!`);
        }

        function validateEmail(email) {
            const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return re.test(email);
        }

        // ==================== ADMIN ====================
        function showAdminLogin() {
            document.getElementById('adminPasswordModal').classList.add('active');
            document.getElementById('adminPassword').focus();
        }

        function closeAdminLogin() {
            document.getElementById('adminPasswordModal').classList.remove('active');
            document.getElementById('adminPassword').value = '';
        }

        function verifyAdminPassword() {
            const password = document.getElementById('adminPassword').value;
            if (password === 'admin123') {
                currentUser = { name: 'Admin', role: 'admin' };
                currentRole = 'admin';
                closeAdminLogin();
                showAdminDashboard();
            } else {
                showNotification('error', 'Invalid admin password!');
            }
        }

        function showAdminDashboard() {
            document.getElementById('publicPage').classList.add('hidden');
            document.getElementById('userLoginPage').classList.add('hidden');
            document.getElementById('adminDashboard').classList.remove('hidden');
            loadApplications();
        }

        // ==================== LOGOUT ====================
        function logout() {
            if (currentUser && currentUser.authProvider === 'google') {
                google.accounts.id.disableAutoSelect();
            }
            
            currentUser = null;
            currentRole = null;
            updateAuthButton();
            document.getElementById('adminDashboard').classList.add('hidden');
            document.getElementById('publicPage').classList.remove('hidden');
            hideApplicationForm();
            showNotification('success', 'Logged out successfully!');
        }

        // ==================== PAYMENT PROCESSING ====================
        async function processStripePayment() {
            const submitBtn = document.getElementById('submitBtn');
            const originalText = submitBtn.innerHTML;
            
            try {
                submitBtn.innerHTML = 'üí≥ Processing Payment...';
                submitBtn.disabled = true;

                const confirmed = confirm(
                    `üí≥ Stripe Payment\n\n` +
                    `Amount: AED ${REGISTRATION_FEE_AED}\n\n` +
                    `Click OK to proceed with payment`
                );
                
                if (!confirmed) {
                    throw new Error('Payment cancelled by user');
                }
                
                // Simulate payment processing
                await new Promise(resolve => setTimeout(resolve, 2000));
                
                // Generate payment ID
                const paymentId = 'pi_' + Math.random().toString(36).substr(2, 24);
                return paymentId;

            } catch (error) {
                submitBtn.innerHTML = originalText;
                submitBtn.disabled = false;
                throw error;
            }
        }

        // ==================== FORM SUBMISSION ====================
        function handleFormSubmit(e) {
            e.preventDefault();

            if (!currentUser) {
                showNotification('error', 'Please login first!');
                return;
            }

            const ageData = calculateAge();
            if (!ageData || ageData.age < 5) {
                showNotification('error', 'Minimum age is 5 years!');
                return;
            }

            // Check for existing application
            const existingApp = sessionData.applications.find(app => app.userEmail === currentUser.email);
            if (existingApp) {
                showNotification('warning', `You have already submitted an application!\nStatus: ${existingApp.status}`);
                return;
            }

            // Validate required fields
            const countryCode = document.getElementById('countryCode').value;
            const talentCategory = document.getElementById('talentCategory').value;
            const mobile = document.getElementById('mobile').value;

            if (!countryCode) {
                showNotification('error', 'Please select a country code!');
                return;
            }

            if (!talentCategory) {
                showNotification('error', 'Please select a talent category!');
                return;
            }

            if (!mobile || mobile.length < 9) {
                showNotification('error', 'Please enter a valid mobile number!');
                return;
            }
            
            const submitBtn = document.getElementById('submitBtn');
            const originalText = submitBtn.innerHTML;

            processStripePayment()
                .then((paymentId) => {
                    submitBtn.innerHTML = '‚è≥ Uploading Files...';
                    
                    const fileInput = document.getElementById('fileUpload');
                    const files = fileInput.files;
                    
                    if (files.length === 0) {
                        showNotification('error', 'Please upload at least one file!');
                        submitBtn.innerHTML = originalText;
                        submitBtn.disabled = false;
                        return;
                    }

                    // Check for oversized files
                    for (let i = 0; i < files.length; i++) {
                        if (files[i].size > 50 * 1024 * 1024) {
                            showNotification('error', 'Please remove files over 50MB!');
                            submitBtn.innerHTML = originalText;
                            submitBtn.disabled = false;
                            return;
                        }
                    }
                    
                    const filePromises = [];
                    const fileNames = [];
                    const fileTypes = [];
                    
                    for (let i = 0; i < files.length; i++) {
                        const file = files[i];
                        fileNames.push(file.name);
                        fileTypes.push(file.type);
                        
                        filePromises.push(new Promise((resolve) => {
                            const reader = new FileReader();
                            reader.onload = (e) => resolve(e.target.result);
                            reader.readAsDataURL(file);
                        }));
                    }
                    
                    Promise.all(filePromises).then((fileDataArray) => {
                        submitBtn.innerHTML = '‚è≥ Saving Application...';

                        const fullMobile = countryCode + mobile;
                        const talentSubCategory = document.getElementById('talentSubCategory')?.value || '';

                        const formData = {
                            id: Date.now(),
                            userId: currentUser.id,
                            userEmail: currentUser.email,
                            userName: currentUser.name,
                            userPhoto: currentUser.photoURL || null,
                            name: document.getElementById('fullName').value,
                            email: document.getElementById('email').value,
                            countryCode: countryCode,
                            mobile: fullMobile,
                            dob: document.getElementById('dateOfBirth').value,
                            age: ageData.age,
                            ageCategory: ageData.category,
                            talentCategory: talentCategory,
                            talentSubCategory: talentSubCategory,
                            talent: document.getElementById('talentDescription').value,
                            files: files.length,
                            fileNames: fileNames,
                            fileData: fileDataArray,
                            fileTypes: fileTypes,
                            fileName: fileNames[0],
                            primaryFileData: fileDataArray[0],
                            fileType: fileTypes[0],
                            status: 'Pending',
                            paymentId: paymentId,
                            paymentAmount: REGISTRATION_FEE_AED,
                            paymentCurrency: CURRENCY,
                            paymentStatus: 'Paid',
                            submittedAt: new Date().toLocaleString()
                        };

                        // Save to Google Sheets
                        saveToGoogleSheets(formData).then(() => {
                            sessionData.applications.push(formData);
                            pendingApplication = formData;

                            // Update user status
                            currentUser.hasApplied = true;
                            const userIndex = sessionData.users.findIndex(u => u.id === currentUser.id);
                            if (userIndex !== -1) {
                                sessionData.users[userIndex].hasApplied = true;
                            }
                            
                            submitBtn.innerHTML = originalText;
                            submitBtn.disabled = false;
                            
                            // Show success modal
                            document.getElementById('successPaymentId').textContent = paymentId;
                            document.getElementById('successEmail').textContent = formData.email;
                            document.getElementById('successCategory').textContent = talentCategory;
                            document.getElementById('successModal').classList.add('active');

                            // Send confirmation email via EmailJS
                            sendConfirmationEmail(formData);
                        }).catch(err => {
                            console.error('Save error:', err);
                            // Still save locally
                            sessionData.applications.push(formData);
                            pendingApplication = formData;
                            
                            submitBtn.innerHTML = originalText;
                            submitBtn.disabled = false;
                            
                            document.getElementById('successPaymentId').textContent = paymentId;
                            document.getElementById('successEmail').textContent = formData.email;
                            document.getElementById('successCategory').textContent = talentCategory;
                            document.getElementById('successModal').classList.add('active');
                        });
                    });
                })
                .catch((error) => {
                    console.error('Payment error:', error);
                    showNotification('error', 'Payment failed: ' + (error.message || 'Please try again'));
                    submitBtn.innerHTML = originalText;
                    submitBtn.disabled = false;
                });
        }

        // ==================== EMAIL FUNCTIONS ====================
        function sendConfirmationEmail(appData) {
            try {
                emailjs.send(EMAILJS_SERVICE_ID, 'template_confirmation', {
                    to_email: appData.email,
                    to_name: appData.name,
                    payment_id: appData.paymentId,
                    amount: `${appData.paymentCurrency} ${appData.paymentAmount}`,
                    category: appData.talentCategory,
                    age_category: appData.ageCategory
                }).then(() => {
                    console.log('‚úÖ Confirmation email sent');
                }).catch(err => {
                    console.warn('Email send failed:', err);
                });
            } catch (e) {
                console.warn('EmailJS error:', e);
            }
        }

        function sendStatusEmail(email, name, status) {
            try {
                const templateId = status === 'Approved' ? TEMPLATE_APPROVED : TEMPLATE_REJECTED;
                emailjs.send(EMAILJS_SERVICE_ID, templateId, {
                    to_email: email,
                    to_name: name,
                    status: status
                }).then(() => {
                    console.log('‚úÖ Status email sent');
                }).catch(err => {
                    console.warn('Status email failed:', err);
                });
            } catch (e) {
                console.warn('EmailJS error:', e);
            }
        }

        function closeSuccessModal() {
            document.getElementById('successModal').classList.remove('active');
            hideApplicationForm();
        }

        // ==================== RECEIPT GENERATION ====================
        function generateReceipt() {
            if (!pendingApplication) {
                showNotification('error', 'No application data found!');
                return;
            }

            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            // Header Background - Golden color #f6cc68
            doc.setFillColor(246, 204, 104);
            doc.rect(0, 0, 210, 55, 'F');
            
            // Dark accent line
            doc.setFillColor(1, 0, 0);
            doc.rect(0, 50, 210, 5, 'F');
            
            // Logo/Title
            doc.setFontSize(32);
            doc.setTextColor(1, 0, 0);
            doc.setFont('helvetica', 'bold');
            doc.text('GODSPEED', 105, 25, { align: 'center' });
            
            doc.setFontSize(14);
            doc.text('SINGHULARS GOT TALENT', 105, 35, { align: 'center' });
            
            doc.setFontSize(10);
            doc.setFont('helvetica', 'normal');
            doc.text('OFFICIAL PAYMENT RECEIPT', 105, 45, { align: 'center' });
            
            // Content section
            let y = 70;
            
            // Receipt title
            doc.setTextColor(1, 0, 0);
            doc.setFontSize(18);
            doc.setFont('helvetica', 'bold');
            doc.text('Payment Receipt', 14, y);
            
            // Receipt number
            doc.setFontSize(10);
            doc.setFont('helvetica', 'normal');
            doc.setTextColor(100, 100, 100);
            doc.text(`Receipt #: ${pendingApplication.paymentId}`, 196, y, { align: 'right' });
            
            y += 15;
            
            // Divider line
            doc.setDrawColor(246, 204, 104);
            doc.setLineWidth(0.5);
            doc.line(14, y, 196, y);
            
            y += 10;
            
            // Applicant Details Section
            doc.setFontSize(12);
            doc.setFont('helvetica', 'bold');
            doc.setTextColor(1, 0, 0);
            doc.text('Applicant Details', 14, y);
            y += 8;
            
            doc.setFontSize(10);
            doc.setFont('helvetica', 'normal');
            doc.setTextColor(60, 60, 60);
            
            const details = [
                ['Full Name:', pendingApplication.userName || pendingApplication.name],
                ['Email:', pendingApplication.userEmail || pendingApplication.email],
                ['Mobile:', pendingApplication.mobile || '‚Äî'],
                ['Date of Birth:', pendingApplication.dob || '‚Äî'],
                ['Age:', `${pendingApplication.age || '‚Äî'} years`],
                ['Age Category:', pendingApplication.ageCategory || '‚Äî'],
                ['Talent Category:', pendingApplication.talentCategory || '‚Äî'],
                ['Sub-Category:', pendingApplication.talentSubCategory || '‚Äî']
            ];
            
            details.forEach(([label, value]) => {
                doc.setFont('helvetica', 'bold');
                doc.text(label, 14, y);
                doc.setFont('helvetica', 'normal');
                doc.text(String(value), 65, y);
                y += 7;
            });
            
            y += 5;
            
            // Payment Details Section
            doc.setFontSize(12);
            doc.setFont('helvetica', 'bold');
            doc.setTextColor(1, 0, 0);
            doc.text('Payment Details', 14, y);
            y += 8;
            
            doc.setFontSize(10);
            doc.setFont('helvetica', 'normal');
            doc.setTextColor(60, 60, 60);
            
            const paymentDetails = [
                ['Payment ID:', pendingApplication.paymentId],
                ['Amount:', `${pendingApplication.paymentCurrency || 'AED'} ${pendingApplication.paymentAmount || REGISTRATION_FEE_AED}`],
                ['Payment Status:', pendingApplication.paymentStatus || 'Paid'],
                ['Payment Method:', 'Stripe'],
                ['Date & Time:', pendingApplication.submittedAt || new Date().toLocaleString()]
            ];
            
            paymentDetails.forEach(([label, value]) => {
                doc.setFont('helvetica', 'bold');
                doc.text(label, 14, y);
                doc.setFont('helvetica', 'normal');
                doc.text(String(value), 65, y);
                y += 7;
            });
            
            y += 5;
            
            // Talent Description
            doc.setFontSize(12);
            doc.setFont('helvetica', 'bold');
            doc.setTextColor(1, 0, 0);
            doc.text('Talent Description', 14, y);
            y += 8;
            
            doc.setFontSize(9);
            doc.setFont('helvetica', 'normal');
            doc.setTextColor(60, 60, 60);
            const talentText = (pendingApplication.talent || '').slice(0, 400);
            const splitTalent = doc.splitTextToSize(talentText || '‚Äî', 180);
            doc.text(splitTalent, 14, y);
            y += (splitTalent.length * 5) + 10;
            
            // Files uploaded
            doc.setFontSize(10);
            doc.setFont('helvetica', 'bold');
            doc.setTextColor(1, 0, 0);
            doc.text('Files Uploaded:', 14, y);
            doc.setFont('helvetica', 'normal');
            doc.setTextColor(60, 60, 60);
            doc.text(`${pendingApplication.files || 0} file(s)`, 65, y);
            y += 15;
            
            // Status Box
            doc.setFillColor(246, 204, 104);
            doc.roundedRect(14, y, 182, 25, 3, 3, 'F');
            
            doc.setFontSize(12);
            doc.setFont('helvetica', 'bold');
            doc.setTextColor(1, 0, 0);
            doc.text('Application Status: PENDING REVIEW', 105, y + 10, { align: 'center' });
            doc.setFontSize(9);
            doc.setFont('helvetica', 'normal');
            doc.text('You will be notified via email within 3-5 business days.', 105, y + 18, { align: 'center' });
            
            // Footer
            doc.setFontSize(8);
            doc.setTextColor(120, 120, 120);
            doc.text('Thank you for applying to SINGHULARS GOT TALENT ‚Äî GODSPEED', 105, 270, { align: 'center' });
            doc.text('For queries: singhularsgottalent@gmail.com', 105, 275, { align: 'center' });
            doc.text(`Generated on: ${new Date().toLocaleString()}`, 105, 280, { align: 'center' });

            // Save file
            const fileName = `SGT_Receipt_${pendingApplication.paymentId || Date.now()}.pdf`;
            doc.save(fileName);
        }

        // ==================== APPLICATION LOADING (ADMIN) ====================
        async function loadApplications() {
            const body = document.getElementById('applicationsBody');
            if (!body) return;

            body.innerHTML = `<tr><td colspan="11" style="text-align: center; padding: 3rem;">Loading applications...</td></tr>`;

            try {
                const sheetApps = await loadFromGoogleSheets();
                
                // Merge with session data
                const allApps = [...sheetApps];
                sessionData.applications.forEach(app => {
                    if (!allApps.find(a => String(a.id) === String(app.id))) {
                        allApps.push(app);
                    }
                });

                if (allApps.length === 0) {
                    body.innerHTML = `<tr><td colspan="11" style="text-align: center; padding: 3rem; color: rgba(255,255,255,0.5);">No applications yet.</td></tr>`;
                    updateStats([]);
                    return;
                }

                // Sort by date descending
                allApps.sort((a, b) => {
                    try {
                        return new Date(b.submittedAt) - new Date(a.submittedAt);
                    } catch (e) {
                        return 0;
                    }
                });

                // Update session data
                sessionData.applications = allApps;

                // Generate table rows
                const rows = allApps.map(app => {
                    const statusClass = (app.status || 'Pending').toLowerCase();
                    return `
                        <tr>
                            <td>
                                <div class="user-cell">
                                    ${app.userPhoto 
                                        ? `<img src="${app.userPhoto}" class="user-avatar" alt="${app.userName || app.name}">` 
                                        : `<div class="user-avatar-placeholder">${((app.userName || app.name || 'U').charAt(0)).toUpperCase()}</div>`
                                    }
                                    <div>
                                        <div class="user-info-name">${app.userName || app.name || '‚Äî'}</div>
                                        <div class="user-info-email">${app.userEmail || app.email || '‚Äî'}</div>
                                    </div>
                                </div>
                            </td>
                            <td>${app.mobile || '‚Äî'}</td>
                            <td>${app.age || '‚Äî'}</td>
                            <td>${app.ageCategory || '‚Äî'}</td>
                            <td>${app.talentCategory || '‚Äî'}</td>
                            <td style="max-width: 200px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">
                                ${(app.talent || '‚Äî').slice(0, 80)}${(app.talent || '').length > 80 ? '...' : ''}
                            </td>
                            <td>
                                <button class="action-btn action-btn-view" onclick="viewFiles('${app.id}')">
                                    üìÅ ${app.files || 0} files
                                </button>
                            </td>
                            <td>AED ${app.paymentAmount || REGISTRATION_FEE_AED}</td>
                            <td><span class="status-badge status-${statusClass}">${app.status || 'Pending'}</span></td>
                            <td class="action-btns">
                                <button class="action-btn action-btn-approve" onclick="updateApplicationStatus('${app.id}', 'Approved')">‚úì</button>
                                <button class="action-btn action-btn-reject" onclick="updateApplicationStatus('${app.id}', 'Rejected')">‚úó</button>
                            </td>
                        </tr>
                    `;
                }).join('');

                body.innerHTML = rows;
                updateStats(allApps);

            } catch (error) {
                console.error('Error loading applications:', error);
                body.innerHTML = `<tr><td colspan="11" style="text-align: center; padding: 3rem; color: #F87171;">Error loading applications. Please refresh.</td></tr>`;
            }
        }

        function updateStats(apps) {
            document.getElementById('totalApps').textContent = apps.length;
            
            const revenue = apps.reduce((sum, app) => sum + (parseFloat(app.paymentAmount) || 0), 0);
            document.getElementById('totalRevenue').textContent = revenue.toFixed(0);

            const categories = {
                'Junior': 0,
                'Teenager': 0,
                'Elder': 0,
                'Senior': 0
            };

            apps.forEach(app => {
                if (categories.hasOwnProperty(app.ageCategory)) {
                    categories[app.ageCategory]++;
                }
            });

            document.getElementById('juniorCount').textContent = categories['Junior'];
            document.getElementById('teenagerCount').textContent = categories['Teenager'];
            document.getElementById('elderCount').textContent = categories['Elder'];
            document.getElementById('seniorCount').textContent = categories['Senior'];
        }

        function updateApplicationStatus(id, status) {
            const idx = sessionData.applications.findIndex(a => String(a.id) === String(id));
            
            if (idx === -1) {
                showNotification('error', 'Application not found!');
                return;
            }

            const app = sessionData.applications[idx];
            
            if (confirm(`Are you sure you want to mark this application as "${status}"?`)) {
                sessionData.applications[idx].status = status;
                
                // Update in Google Sheets
                updateStatusInGoogleSheets(id, status);
                
                // Send email notification
                sendStatusEmail(app.userEmail || app.email, app.userName || app.name, status);
                
                // Reload table
                loadApplications();
                
                showNotification('success', `Application ${status.toLowerCase()} successfully!`);
            }
        }

        // ==================== FILE VIEWER ====================
        function viewFiles(appId) {
            const app = sessionData.applications.find(a => String(a.id) === String(appId));
            if (!app) {
                showNotification('error', 'Application not found!');
                return;
            }

            const viewer = document.getElementById('fileViewerContent');
            viewer.innerHTML = '';

            if (!app.fileData || app.fileData.length === 0) {
                viewer.innerHTML = '<div style="padding: 3rem; text-align: center; color: rgba(255,255,255,0.6);">No files uploaded</div>';
                document.getElementById('fileViewerModal').classList.add('active');
                return;
            }

            // Create file tabs if multiple files
            if (app.fileData.length > 1) {
                const tabsContainer = document.createElement('div');
                tabsContainer.className = 'file-tabs';
                tabsContainer.id = 'fileTabs';
                tabsContainer.style.cssText = 'display: flex; gap: 0.5rem; margin-bottom: 1rem; flex-wrap: wrap;';
                
                app.fileData.forEach((_, idx) => {
                    const tab = document.createElement('button');
                    tab.className = 'btn btn-ghost';
                    tab.style.cssText = idx === 0 ? 'background: rgba(246, 204, 104, 0.3); border-color: #f6cc68;' : '';
                    tab.textContent = app.fileNames[idx] || `File ${idx + 1}`;
                    tab.onclick = () => showFilePreview(app, idx);
                    tabsContainer.appendChild(tab);
                });
                
                viewer.appendChild(tabsContainer);
            }

            // File preview container
            const previewContainer = document.createElement('div');
            previewContainer.id = 'filePreviewContainer';
            previewContainer.style.cssText = 'background: rgba(8,4,4,0.5); border-radius: 16px; min-height: 400px; display: flex; align-items: center; justify-content: center; overflow: hidden;';
            viewer.appendChild(previewContainer);

            // Show first file
            showFilePreview(app, 0);

            currentViewingFile = { app, index: 0 };
            document.getElementById('fileViewerModal').classList.add('active');
        }

        function showFilePreview(app, index) {
            const container = document.getElementById('filePreviewContainer');
            if (!container) return;

            container.innerHTML = '';

            const fileData = app.fileData[index];
            const fileType = app.fileTypes[index] || '';
            const fileName = app.fileNames[index] || 'File';

            currentViewingFile = { app, index };

            // Update tab styling
            const tabsContainer = document.getElementById('fileTabs');
            if (tabsContainer) {
                Array.from(tabsContainer.children).forEach((tab, i) => {
                    tab.style.background = i === index ? 'rgba(246, 204, 104, 0.3)' : '';
                    tab.style.borderColor = i === index ? '#f6cc68' : '';
                });
            }

            if (fileType.includes('image')) {
                const img = document.createElement('img');
                img.src = fileData;
                img.style.cssText = 'max-width: 100%; max-height: 500px; border-radius: 12px;';
                img.alt = fileName;
                container.appendChild(img);
            } else if (fileType.includes('video') || fileType.includes('mp4')) {
                const video = document.createElement('video');
                video.src = fileData;
                video.controls = true;
                video.style.cssText = 'max-width: 100%; max-height: 500px; border-radius: 12px;';
                container.appendChild(video);
            } else if (fileType.includes('audio') || fileType.includes('mp3')) {
                const audioContainer = document.createElement('div');
                audioContainer.style.cssText = 'text-align: center; padding: 3rem;';
                audioContainer.innerHTML = `
                    <div style="font-size: 4rem; margin-bottom: 1rem;">üéµ</div>
                    <div style="margin-bottom: 1rem; font-weight: 600; color: #f6cc68;">${fileName}</div>
                    <audio controls src="${fileData}" style="width: 100%; max-width: 400px;"></audio>
                `;
                container.appendChild(audioContainer);
            } else if (fileType.includes('pdf')) {
                const pdfContainer = document.createElement('div');
                pdfContainer.style.cssText = 'text-align: center; padding: 3rem;';
                pdfContainer.innerHTML = `
                    <div style="font-size: 4rem; margin-bottom: 1rem;">üìÑ</div>
                    <div style="margin-bottom: 1rem; font-weight: 600; color: #f6cc68;">${fileName}</div>
                    <p style="color: rgba(255,255,255,0.6); margin-bottom: 1rem;">PDF preview not available</p>
                    <button onclick="downloadCurrentFile()" class="btn btn-primary">‚¨áÔ∏è Download PDF</button>
                `;
                container.appendChild(pdfContainer);
            } else {
                const unknownContainer = document.createElement('div');
                unknownContainer.style.cssText = 'text-align: center; padding: 3rem;';
                unknownContainer.innerHTML = `
                    <div style="font-size: 4rem; margin-bottom: 1rem;">üìÅ</div>
                    <div style="margin-bottom: 1rem; font-weight: 600; color: #f6cc68;">${fileName}</div>
                    <p style="color: rgba(255,255,255,0.6);">Preview not available for this file type</p>
                    <button onclick="downloadCurrentFile()" class="btn btn-primary" style="margin-top: 1rem;">‚¨áÔ∏è Download File</button>
                `;
                container.appendChild(unknownContainer);
            }
        }

        function closeFileViewer() {
            document.getElementById('fileViewerModal').classList.remove('active');
            currentViewingFile = null;
        }

        function downloadCurrentFile() {
            if (!currentViewingFile) return;

            const { app, index } = currentViewingFile;
            const fileData = app.fileData[index];
            const fileName = app.fileNames[index] || `file_${index + 1}`;

            const link = document.createElement('a');
            link.href = fileData;
            link.download = fileName;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        function downloadFile() {
            downloadCurrentFile();
        }

        // ==================== NOTIFICATION SYSTEM ====================
        function showNotification(type, message) {
            // Remove existing notifications
            const existing = document.querySelector('.notification');
            if (existing) {
                existing.remove();
            }

            const notification = document.createElement('div');
            notification.className = 'notification';
            
            const bgColor = {
                'success': 'rgba(34, 197, 94, 0.9)',
                'error': 'rgba(239, 68, 68, 0.9)',
                'warning': 'rgba(246, 204, 104, 0.9)',
                'info': 'rgba(59, 130, 246, 0.9)'
            }[type] || 'rgba(156, 150, 119, 0.9)';

            const textColor = type === 'warning' ? '#010000' : '#FFFFFF';

            const icon = {
                'success': '‚úì',
                'error': '‚úó',
                'warning': '‚ö†',
                'info': '‚Ñπ'
            }[type] || '‚Ñπ';

            notification.style.cssText = `
                position: fixed;
                top: 100px;
                right: 20px;
                background: ${bgColor};
                color: ${textColor};
                padding: 1rem 1.5rem;
                border-radius: 12px;
                font-weight: 500;
                z-index: 10000;
                display: flex;
                align-items: center;
                gap: 0.75rem;
                box-shadow: 0 10px 40px rgba(0,0,0,0.3);
                animation: slideIn 0.3s ease;
                max-width: 400px;
            `;

            notification.innerHTML = `
                <span style="font-size: 1.25rem;">${icon}</span>
                <span>${message}</span>
            `;

            // Add animation styles
            const style = document.createElement('style');
            style.textContent = `
                @keyframes slideIn {
                    from { transform: translateX(100%); opacity: 0; }
                    to { transform: translateX(0); opacity: 1; }
                }
                @keyframes slideOut {
                    from { transform: translateX(0); opacity: 1; }
                    to { transform: translateX(100%); opacity: 0; }
                }
            `;
            document.head.appendChild(style);

            document.body.appendChild(notification);

            // Auto remove after 4 seconds
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease forwards';
                setTimeout(() => {
                    notification.remove();
                }, 300);
            }, 4000);
        }

        // ==================== UTILITY FUNCTIONS ====================
        function scrollToSection(sectionId) {
            const section = document.getElementById(sectionId);
            if (section) {
                section.scrollIntoView({ behavior: 'smooth' });
            }
        }

        function formatDate(dateString) {
            try {
                const date = new Date(dateString);
                return date.toLocaleDateString('en-US', {
                    year: 'numeric',
                    month: 'short',
                    day: 'numeric'
                });
            } catch (e) {
                return dateString;
            }
        }

        function formatCurrency(amount, currency = 'AED') {
            return `${currency} ${parseFloat(amount).toFixed(2)}`;
        }

        // ==================== EXPORT FUNCTIONS (ADMIN) ====================
        function exportToCSV() {
            if (sessionData.applications.length === 0) {
                showNotification('warning', 'No applications to export!');
                return;
            }

            const headers = [
                'ID', 'Name', 'Email', 'Mobile', 'DOB', 'Age', 'Age Category',
                'Talent Category', 'Sub-Category', 'Talent Description',
                'Files', 'Payment ID', 'Amount', 'Status', 'Submitted At'
            ];

            const rows = sessionData.applications.map(app => [
                app.id,
                app.name || app.userName,
                app.email || app.userEmail,
                app.mobile,
                app.dob,
                app.age,
                app.ageCategory,
                app.talentCategory,
                app.talentSubCategory,
                `"${(app.talent || '').replace(/"/g, '""')}"`,
                app.files,
                app.paymentId,
                app.paymentAmount,
                app.status,
                app.submittedAt
            ]);

            const csvContent = [
                headers.join(','),
                ...rows.map(row => row.join(','))
            ].join('\n');

            const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = `SGT_Applications_${new Date().toISOString().split('T')[0]}.csv`;
            link.click();

            showNotification('success', 'Applications exported successfully!');
        }

        // ==================== KEYBOARD SHORTCUTS ====================
        document.addEventListener('keydown', function(e) {
            // ESC to close modals
            if (e.key === 'Escape') {
                closeAdminLogin();
                closeSuccessModal();
                closeFileViewer();
            }
        });

        // ==================== INITIALIZE ON DOM READY ====================
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üöÄ Singhulars Got Talent - GODSPEED Initialized');
        });
    </script>
    </body>
</html>
